# Web 计算机网络


## 真正理解HTTPS


### 题眼点拨

1. 明文传输
    对应到网络传输中，就是客户端发送请求，服务端发送响应，双方都不对自己的请求/响应内容做加密的情况。这种情况下，请求/响应一旦被中间人拦截，就可以对其中的内容一览无余、为所欲为。
2. 对称加密
    对应到网络传输中，就是客户端和服务器约定一个共同的“公钥”，加密和解密都依赖这一个公钥这种情况。这种情况下，一旦公钥失窃了，那么双方传输的密文信息就会再次进入裸奔状态，仍然无法规避中间人的攻击。
3. 非对称加密
    非对称加密，在这里指的是公钥+私钥配合加密这种手段。公钥和私钥是多对一的关系，公钥加密的内容，只有私钥可以解开，私钥加密的内容，所有的公钥都可以解开。
    这样一来，就算中间人截获了公钥，但由于手里没有私钥，仍然没法正确地对数据进行解密。
    注意，第三次约会时，两人只有第一次通信传输邮件密码时使用了非对称加密，后续仍然是通过一个邮件密码来进行加密&解密的。这个过程，就是对称加密和非对称加密结合的一种用法——先用非对称加密确保公钥（邮件密码）的安全，再用安全的公钥（邮件密码）来进行对称加密。
    不过即便如此，仍然没办法规避中间人伪造公钥的这种场景，所以我们还需要第三方认证
4. 第三方认证
    这个第三方机构在现实中其实是真实存在的，叫做CA（Catificate Authority）。它的作用就是提供证书，证书中包含的主要信息有：
    - 域名
    - 公司信息
    - 序列号
    - 签名信息    
    CA 机构有很多，客户端里会维护一套所有权威的 CA 机构的公钥用于解密。客户端获取到证书里的机构信息之后，就会取出对应机构的公钥来解析证书里的签名和服务器发来的公钥信息。用签名来校验对方的身份，若校验通过，就可以顺利地使用当前解读出的公钥进行通信了。这个过程，就是“第三方认证”。