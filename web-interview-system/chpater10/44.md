# CSS 魔法


## 重点布局方案（下）


### BFC 是什么？如何创造一个 BFC？

1. 理解 BFC
块格式化上下文（Block Formatting Context，BFC） 是Web页面的可视化CSS渲染的一部分，是块盒子的布局过程发生的区域，也是浮动元素与其他元素交互的区域。
BFC 就是一个作用范围。可以把它理解成是一个独立的容器。注意这个“独立”，它意味着这个作用范围和外界是毫不相关的。

BFC 主要被用来解决以下常见的布局问题：
- 清除浮动；
- 阻止 margin 发生重叠；
- 阻止元素被浮动的元素覆盖。

常见的创建 BFC 的方法：
- float 的值不是 none；
- position 的值不是 static 或者 relative；
- display 的值是 inline-block、table-cell、flex、table-caption 或者 inline-flex；
- overflow 的值不是 visible。
注意：创建 BFC 的方法还有很多，这里是使用频率较高的几种。还是一样，大家不必追求数量哈。

2. BFC 清除浮动
浮动布局应用的一个基本目的：它是为了改变应用了 float 的那些目标元素的布局方式。在这里，父元素的宽高也被间接地改变了，这是浮动布局的一个副作用。
解决这个副作用，有一个非常成熟的方案叫做“清除浮动”。创建 BFC 就是清除浮动的一种方法。

3. BFC 解决重叠边距问题
在CSS当中，相邻的两个盒子的外边距会被结合成一个单独的外边距。这种合并外边距的方式就叫折叠。
通过把两个子元素放进两个不同的 BFC 里，利用 BFC “独立”的特性，可以使两个子元素的所有内容都被严严实实地包进各自的 BFC 中，避免与外界产生重叠的关系。

4. 阻止元素被浮动的元素覆盖
CSS 中有一种常见的布局效果：两列布局，一列宽度固定，另一列自适应。实现这种效果，有一条路就是基于浮动来做
但是“两列”却是个问题，左侧的盒子因为使用了浮动布局，它会脱离原有的文档流，“浮”在普通文档流的上方。这样一来，就遮盖了没有浮动的元素。
B 元素被 A 元素覆盖，这意味着什么？这意味着 B 元素被外界影响了！一个 BFC 的基本修养是什么？是高度的独立性，不被外界的布局干扰。因此，要想解决覆盖问题，我们为 B 元素（这里就是蓝色盒子）创建一个 BFC


### 谈谈你对 CSS 工程化的理解

CSS 工程化是为了解决哪些方面的问题：
1. 宏观设计：CSS 代码如何组织、如何拆分、模块结构怎样设计？
2. 编码优化：怎样写出更好的 CSS？
3. 构建：如何处理我的 CSS，才能让它的打包结果最优？
4. 可维护性：代码写完了，如何最小化它后续的变更成本？如何确保任何一个同事都能轻松接手？

- 预处理器：Less、 Sass 等；
- 重要的工程化插件： PostCss；
- Webpack loader 等 。
这三个方向都是时下比较流行的、普适性非常好的 CSS 工程化实践

1. 预处理器：为什么要用预处理器？它的出现是为了解决什么问题？
预处理器，其实就是 CSS 世界的“轮子”。预处理器支持我们写一种类似 CSS、但实际并不是 CSS 的语言，然后把它编译成 CSS 代码

预处理器五花八门，它们普遍会具备这样的特性：
- 嵌套代码的能力，通过嵌套来反映不同 css 属性之间的层级关系 ；
- 支持定义 css 变量；
- 提供计算函数；
- 允许对代码片段进行 extend 和 mixin；
- 支持循环语句的使用；
- 支持将 CSS 文件模块化，实现复用。

2. PostCss：PostCss 是如何工作的？我们在什么场景下会使用 PostCss？
它和预处理器的不同就在于，预处理器处理的是 类CSS，而 PostCss 处理的就是 CSS 本身。
理解 PostCss，我们可以类比 JS 世界里的 Babel。大家知道，Babel 可以将高版本的 JS 代码转换为低版本的 JS 代码。PostCss 做的是类似的事情：它可以编译尚未被浏览器广泛支持的先进的 CSS 语法，还可以自动为一些需要额外兼容的语法增加前缀。更强的是，由于 PostCss 有着强大的插件机制，支持各种各样的扩展，极大地强化了 CSS 的能力。

PostCss 在业务中的使用场景非常多，这里我列举几个最高频的：
- 提高 CSS 代码的可读性：PostCss 其实可以做类似预处理器能做的工作；
- 当我们的 CSS 代码需要适配低版本浏览器时，PostCss 的 Autoprefixer 插件可以帮助我们自动增加浏览器前缀；
- 允许我们编写面向未来的 CSS：PostCss 能够帮助我们编译 CSS next 代码；

3. Webpack 能处理 CSS 吗？如何实现？
- Webpack 在裸奔的状态下，是不能处理 CSS 的，Webpack 本身是一个面向 JavaScript 且只能处理 JavaScript 代码的模块化打包工具；
- Webpack 在 loader 的辅助下，是可以处理 CSS 的。

如何用 Webpack 实现对 CSS 的处理？
Webpack 中操作 CSS 需要使用的两个关键的 loader：css-loader 和 style-loader
每个 loader 都做了什么事情：
- css-loader：导入 CSS 模块，对 CSS 代码进行编译处理；
- style-loader：创建style标签，把 CSS 内容写入标签。

css-loader 的执行顺序一定要安排在 style-loader 的前面。因为只有完成了编译过程，才可以对 css 代码进行插入；若提前插入了未编译的代码，那么 webpack 是无法理解这坨东西的，它会无情报错。
