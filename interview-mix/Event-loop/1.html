<script>
  // 宏任务队列: [setTimeout]
  // 微任务队列: [.then1]
  setTimeout(() => {
    console.log(1)
    Promise.resolve(6).then(console.log)
  })
  new Promise((resolve, reject) => {
    console.log(2) // 生产 Promise 是同步的
    resolve(3)
  })
  .then(r => {
    console.log(r)
    // return 999
    // return new Promise()
    setTimeout(() => {
      console.log(5)
    })
    return undefined
  })
  .then(r => {
    console.log(r)
  })
  console.log(4)
  // 2 4 3 1
</script>